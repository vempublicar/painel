(function () {
    "use strict";

    const themeKey = "tablerTheme";
    let theme = localStorage.getItem(themeKey) || "light";

    const applyTheme = () => {
        if (theme === "dark") {
            document.body.setAttribute("data-bs-theme", "dark");
            document.body.classList.remove("theme-light");
            document.body.classList.add("theme-dark");
        } else {
            document.body.removeAttribute("data-bs-theme");
            document.body.classList.remove("theme-dark");
            document.body.classList.add("theme-light");
        }
    };

    window.toggleTheme = () => {
        theme = theme === "dark" ? "light" : "dark";
        localStorage.setItem(themeKey, theme);
        applyTheme();
    };

    // Apply the theme immediately on page load
    applyTheme();
})();

(function () {
    "use strict";

    const applyFullscreen = () => {
        if (document.fullscreenElement) {
            exitFullscreen();
        } else {
            enterFullscreen();
        }
    };

    const enterFullscreen = () => {
        const element = document.documentElement;
        if (element.requestFullscreen) {
            element.requestFullscreen().catch(err => {
                console.error(`Error attempting to enable full-screen mode: ${err.message} (${err.name})`);
            });
        } else if (element.mozRequestFullScreen) { // Firefox
            element.mozRequestFullScreen().catch(err => {
                console.error(`Error attempting to enable full-screen mode: ${err.message} (${err.name})`);
            });
        } else if (element.webkitRequestFullscreen) { // Chrome, Safari and Opera
            element.webkitRequestFullscreen().catch(err => {
                console.error(`Error attempting to enable full-screen mode: ${err.message} (${err.name})`);
            });
        } else if (element.msRequestFullscreen) { // IE/Edge
            element.msRequestFullscreen().catch(err => {
                console.error(`Error attempting to enable full-screen mode: ${err.message} (${err.name})`);
            });
        }
        document.body.classList.add('fullscreen-active');
    };

    const exitFullscreen = () => {
        if (document.fullscreenElement) {
            document.exitFullscreen().catch(err => {
                console.error(`Error attempting to exit full-screen mode: ${err.message} (${err.name})`);
            });
        }
        document.body.classList.remove('fullscreen-active');
    };

    const toggleFullscreen = () => {
        if (document.fullscreenElement) {
            exitFullscreen();
        } else {
            enterFullscreen();
        }
    };

    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('fullscreenToggle').addEventListener('click', function(event) {
            event.preventDefault();
            toggleFullscreen();
        });
    });
})();